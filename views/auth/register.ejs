<% layout('templates/home-template') %>

<section class="container-fluid">
  <div class="row">
    <div class="col-6 auth-img-container">
      <img
        class="img-fluid auth-img"
        src="/images/signup.png"
        alt="Signin image"
      />
    </div>
    <div class="col-6 auth-form">
      <h1 class="my-5 text-center">Create a new account</h1>

      <form action="/api/v1/auth/register" method="post">
        <div class="mb-3">
          <div class="row">
            <div class="col-6">
              <label class="form-label" for="firstname">First Name:</label>
              <input
                class="form-control"
                name="first"
                id="firstname"
                type="text"
              />
            </div>

            <div class="col-6">
              <label class="form-label" for="lastname">Last Name:</label>
              <input
                class="form-control"
                name="last"
                id="lastname"
                type="text"
              />
            </div>
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label" for="company">Company:</label>
          <input
            class="form-control"
            name="company"
            id="company"
            type="company"
          />
        </div>
        <div class="mb-3">
          <label class="form-label" for="email">Email:</label>
          <input class="form-control" name="email" id="email" type="email" />
        </div>
        <div class="mb-3">
          <label class="form-label" for="password">Password:</label>
          <input
            class="form-control"
            name="password"
            id="password"
            type="text"
          />
        </div>
        <div class="mb-3">
          <label class="form-label" for="role">Role</label>
          <select class="form-select" name="role" id="role">
            <!-- <option selected>Status</option> -->
            <option selected value="Admin">Admin</option>
            <option value="Technician">Technician</option>
            <option value="User">User</option>
          </select>
        </div>
        <div class="form-check form-check-inline ms-4">
          <input
            class="form-check-input"
            type="checkbox"
            id="demo"
            name="demo"
          />
          <label class="form-check-label" for="demo"> Demo </label>
        </div>

        <!-- Button trigger modal -->

        <button
          type="submit"
          data-bs-toggle="modal"
          data-bs-target="#loadingModal"
          class="btn btn-outline-dark btn-lg"
          onclick="isDemo()"
        >
          Sign up
        </button>

        <!-- Modal -->
        <div
          class="modal"
          id="loadingModal"
          data-bs-backdrop="static"
          data-bs-keyboard="false"
          tabindex="-1"
          aria-labelledby="staticBackdropLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header justify-content-center">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">
                  ... Setting up demo
                </h1>
              </div>
              <div class="modal-body text-center">
                <div class="spinner-grow loading-color" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <div class="spinner-grow loading-color" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <div class="spinner-grow loading-color" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
      <p class="mt-3">
        Already have an account? <a href="/api/v1/auth/login">Sign in</a>
      </p>
    </div>
  </div>
</section>

<script>
  function isDemo() {
    const demoEl = document.getElementById("demo");
    console.log(demoEl.checked); // false
    if (!demoEl.checked) {
      console.log("hide loadingModal");
      const loadingModal = document.getElementById("loadingModal");
      loadingModal.style.display = "none";
    }
  }
</script>
